; =============================================================================
; PlatformIO Configuration for GenesisEngine Development
; =============================================================================
;
; This file is for DEVELOPMENT and TESTING only.
; End users installing via Arduino IDE can ignore this file.
;
; Usage:
;   1. Open this folder in VS Code with PlatformIO extension
;   2. To switch examples, change src_dir below:
;      - examples/BasicPlayback    = VGM format from PROGMEM
;      - examples/SerialStreaming  = Stream VGM over serial from PC
;      - examples/SDCardPlayer     = Play from SD card with serial menu
;      - examples/EmulatorBridge   = Real-time streaming from emulators
;   3. Select board environment (mega, uno, teensy41, etc.)
;   4. Build and upload
;
; =============================================================================

[platformio]
default_envs = teensy41_sd
; Change this line to switch examples:
src_dir = examples/EmulatorBridge
lib_dir = .

[env]
framework = arduino
lib_extra_dirs = .

; =============================================================================
; Board Environments
; =============================================================================

[env:mega]
platform = atmelavr
board = megaatmega2560
monitor_speed = 115200
; Increase serial RX buffer for streaming (default is 64)
build_flags = -DSERIAL_RX_BUFFER_SIZE=256
; Ignore SD library - only mega_sd environment uses it
lib_ignore = SD

[env:uno]
platform = atmelavr
board = uno
monitor_speed = 115200
; Increase serial RX buffer for streaming (default is 64)
; Note: Uno has less RAM, can't go as high as Mega
build_flags = -DSERIAL_RX_BUFFER_SIZE=128
lib_ignore = SD

; -----------------------------------------------------------------------------
; SD Card environments (for SDCardPlayer example)
; -----------------------------------------------------------------------------

[env:mega_sd]
platform = atmelavr
board = megaatmega2560
monitor_speed = 115200
build_flags = -DGENESIS_ENGINE_USE_SD=1
lib_deps = SD

[env:teensy41]
platform = teensy
board = teensy41
monitor_speed = 115200
build_flags = -DUSB_MIDI_SERIAL
lib_ignore = SD

[env:teensy41_sd]
platform = teensy
board = teensy41
monitor_speed = 115200
build_flags = -DUSB_MIDI_SERIAL
lib_deps = SD

[env:teensy40]
platform = teensy
board = teensy40
monitor_speed = 115200
build_flags = -DUSB_MIDI_SERIAL
lib_ignore = SD

[env:teensy40_sd]
platform = teensy
board = teensy40
monitor_speed = 115200
build_flags = -DUSB_MIDI_SERIAL
lib_deps = SD

[env:esp32]
platform = espressif32
board = esp32dev
monitor_speed = 115200
; Increase serial RX buffer for streaming (ESP32 uses different define than AVR)
build_flags = -DARDUINO_SERIAL_RX_BUFFER_SIZE=1024
lib_ignore = SD

[env:esp32_sd]
platform = espressif32
board = esp32dev
monitor_speed = 115200
build_flags =
  -DGENESIS_ENGINE_USE_SD=1
  -DARDUINO_SERIAL_RX_BUFFER_SIZE=1024
lib_deps = SD
